<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.paint.Color?>

<StackPane xmlns="http://javafx.com/javafx/21"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.gym.ui.controllers.AdminBookingsController"
           styleClass="app-root"
           prefWidth="1400"
           prefHeight="800">

    <!-- 1) BACKGROUND IMAGE -->
    <ImageView fitWidth="1400"
               fitHeight="800"
               preserveRatio="false"
               smooth="true"
               pickOnBounds="true">
        <image>
            <Image url="@../images/admin.jpg"/>
        </image>
    </ImageView>

    <!-- 2) DARK OVERLAY -->
    <Rectangle width="1400" height="800" opacity="0.50">
        <fill>
            <Color fx:constant="BLACK"/>
        </fill>
    </Rectangle>

    <!-- 3) MAIN CONTENT -->
    <BorderPane prefWidth="1400" prefHeight="800">

        <!-- TOP: back button -->
        <top>
            <StackPane style="-fx-padding: 20 20 0 20;">
                <children>
                    <Button text="Back to dashboard"
                            onAction="#onBackClicked"
                            styleClass="secondary-btn"
                            StackPane.alignment="TOP_RIGHT"/>
                </children>
            </StackPane>
        </top>

        <!-- CENTER: title + filters + table + action button -->
        <center>
            <VBox alignment="TOP_CENTER"
                  spacing="18"
                  style="-fx-padding: 40 40 40 40;">

                <!-- TITLE -->
                <Label text="All bookings"
                       style="-fx-text-fill: white;
                              -fx-font-size: 32px;
                              -fx-font-weight: bold;
                              -fx-font-family: 'Impact','Arial Black';"/>

                <!-- FILTERS ROW -->
                <HBox alignment="CENTER"
                      spacing="12"
                      maxWidth="1000">
                    <children>
                        <TextField fx:id="searchField"
                                   promptText="Search by member, class or booking ID..."
                                   styleClass="search-field-dark"
                                   prefWidth="420"
                                   prefHeight="36"/>

                        <Label text="Status:"
                               style="-fx-text-fill: #f5f5f5; -fx-font-size: 13px;"/>

                        <ComboBox fx:id="statusFilter"
                                  prefWidth="160"
                                  styleClass="status-combo-dark"/>

                        <Button text="Search"
                                onAction="#onSearchClicked"
                                styleClass="primary-btn"/>

                        <Button text="Clear"
                                onAction="#onClearSearchClicked"
                                styleClass="secondary-btn"/>
                    </children>
                </HBox>

                <!-- BOOKINGS TABLE -->
                <StackPane maxWidth="1100" maxHeight="480">
                    <TableView fx:id="bookingsTable"
                               prefHeight="480"
                               prefWidth="1100"
                               styleClass="booking-table">
                        <columns>
                            <TableColumn fx:id="bookingIdColumn" text="ID" prefWidth="60"/>
                            <TableColumn fx:id="memberColumn" text="Member" prefWidth="130"/>
                            <TableColumn fx:id="classColumn" text="Class" prefWidth="160"/>
                            <TableColumn fx:id="dateColumn" text="Date" prefWidth="120"/>
                            <TableColumn fx:id="timeColumn" text="Time" prefWidth="120"/>
                            <TableColumn fx:id="bookingDateColumn" text="Booked at" prefWidth="230"/>
                            <TableColumn fx:id="statusColumn" text="Status" prefWidth="120"/>
                        </columns>
                    </TableView>
                </StackPane>

                <!-- ACTION BUTTON -->
                <HBox alignment="CENTER_RIGHT"
                      spacing="16"
                      maxWidth="1100"
                      style="-fx-padding: 6 0 0 0;">
                    <children>
                        <Button text="Cancel selected booking"
                                onAction="#onCancelBookingClicked"
                                styleClass="primary-btn"/>
                    </children>
                </HBox>

            </VBox>
        </center>

    </BorderPane>
</StackPane>
